<!DOCTYPE html>
<html lang='ko'>

<head>
  <meta charset='UTF-8' />
  <title>âš¾ ì‚¼ì„± í—Œí„°ìŠ¤ ì˜¤ë” ì‘ì„± âš¾</title>

  <link rel="stylesheet" href="common.css" />
  <link rel="stylesheet" href="order_write.css" />
</head>

<body>
  <h1>âš¾ ì‚¼ì„± í—Œí„°ìŠ¤ ì˜¤ë” ì‘ì„± âš¾</h1>

  <hr>

  <div style='margin-top:10px; display:flex; gap:10px;'>
    <button class='buttonStyles' onclick="location.href='index.html'">ğŸ  í™ˆí™”ë©´</button>
  </div>

  <div style='margin-top:10px;'>
    <label>ì˜¤ë”ëª…: </label>
    <input type='text' id='orderName' placeholder='ex) 26-03-01 NBL' style='width:260px; padding:6px;' />
    <button class='buttonStyles' onclick='saveOrder()'>ğŸ’¾ ì €ì¥</button>
  </div>

  <div id='mainArea'>

    <!-- ì°¸ê°€ ëª…ë‹¨ -->
    <div id='areaA' class='panelBox'>
      <span style="font-weight: bolder;">ì°¸ê°€ ëª…ë‹¨</span>

      <div style='display:flex; gap:10px; align-items:center; margin-bottom:5px; margin-top: 5px;'>
        <select id='playerSelect' style="width: 100px;"></select>
        <button class='buttonStyles' onclick='addPlayer()'>ì¶”ê°€</button>
      </div>

      <table class="table_common">
        <thead>
          <tr>
            <th style="width: 80px;">ì„ ìˆ˜ëª…</th>
            <th style="width: 40px;"></th>
          </tr>
        </thead>
        <tbody id='playerTableBody'></tbody>
      </table>
    </div>

    <!-- ì¤‘ì•™ í•„ë“œ + ì„ ë°œ -->
    <div id='positionWrapper'>

      <div id='areaB1'>
        <select id='pos_CF' class='posSelect' onchange='updatePosition("CF", this.value)'></select>
        <select id='pos_LF' class='posSelect' onchange='updatePosition("LF", this.value)'></select>
        <select id='pos_RF' class='posSelect' onchange='updatePosition("RF", this.value)'></select>

        <select id='pos_SS' class='posSelect' onchange='updatePosition("SS", this.value)'></select>
        <select id='pos_2B' class='posSelect' onchange='updatePosition("2B", this.value)'></select>
        <select id='pos_3B' class='posSelect' onchange='updatePosition("3B", this.value)'></select>
        <select id='pos_1B' class='posSelect' onchange='updatePosition("1B", this.value)'></select>

        <select id='pos_P' class='posSelect' onchange='updatePosition("P", this.value)'></select>
        <select id='pos_C' class='posSelect' onchange='updatePosition("C", this.value)'></select>
        <select id='pos_DH' class='posSelect' onchange='updatePosition("DH", this.value)'></select>
      </div>

      <div id='middleWrapper'>

        <div id='areaC1'>
          <table class="table_common">
            <caption style='font-weight:bolder;'>ì„ ë°œ ëª…ë‹¨</caption>
            <thead>
              <tr>
                <th style="width: 25px;">íƒ€ìˆœ</th>
                <th style="width: 90px;">ì„ ìˆ˜ëª…</th>
                <th style="width: 100px;">í¬ì§€ì…˜</th>
              </tr>
            </thead>
            <tbody id='startingTableBody'></tbody>
          </table>
        </div>

        <div id='areaC2'>
          <table class="table_common">
            <caption style='font-weight:bolder;'>ëŒ€ê¸° ëª…ë‹¨</caption>
            <thead>
              <tr>
                <th style="width: 80px;">ì„ ìˆ˜ëª…</th>
              </tr>
            </thead>
            <tbody id='waitingTableBody'>
              <tr>
                <td></td>
              </tr>
              <tr>
                <td></td>
              </tr>
              <tr>
                <td></td>
              </tr>
              <tr>
                <td></td>
              </tr>
              <tr>
                <td></td>
              </tr>
              <tr>
                <td></td>
              </tr>
              <tr>
                <td></td>
              </tr>
              <tr>
                <td></td>
              </tr>
              <tr>
                <td></td>
              </tr>
              <tr>
                <td></td>
              </tr>
            </tbody>

          </table>
        </div>

      </div>

    </div>

    <!-- ì¶œì „ ê°€ëŠ¥ í¬ì§€ì…˜ -->
    <div id='areaB2'>
      <div id='positionAbilityContainer'></div>
    </div>

  </div>

  <!-- =======================
       JS í†µí•©ë³¸ ì‹œì‘
  ======================= -->
  <script>
    const API = { getPlayers: 'https://getplayers-2guymqucma-uc.a.run.app' };

    let playerDB = [];
    let selectedPlayers = [];

    let positionAssignments = {
      CF: '', LF: '', RF: '',
      SS: '', '2B': '', '3B': '',
      P: '', C: '', DH: '', '1B': ''
    };

    let startingList = Array(10).fill().map(() => ({ name: '', pos: '' }));


    const abilityPositions = [
      { key: 'p', label: 'íˆ¬ìˆ˜' },
      { key: 'c', label: 'í¬ìˆ˜' },
      { key: '1b', label: '1ë£¨' },
      { key: '2b', label: '2ë£¨' },
      { key: '3b', label: '3ë£¨' },
      { key: 'ss', label: 'ìœ ê²©' },
      { key: 'of', label: 'ì™¸ì•¼' }
    ];

    async function loadPlayerDB() {
      const res = await fetch(API.getPlayers);
      playerDB = await res.json();
    }

    function nameWithNum(name) {
      if (!name) return '';
      const p = playerDB.find(x => x.name === name);
      return p ? `${name}(${p.num})` : name;
    }

    /* ===============================
       ì°¸ê°€ ëª…ë‹¨ ì²˜ë¦¬
    =============================== */

    function renderPlayerSelect() {
      const select = document.getElementById('playerSelect');
      select.innerHTML = '';

      const candidates = playerDB.filter(p => !selectedPlayers.includes(p.name));

      if (candidates.length === 0) {
        const opt = document.createElement('option');
        opt.textContent = 'ì¶”ê°€ ì—†ìŒ';
        opt.disabled = true;
        select.appendChild(opt);
        return;
      }

      candidates.forEach(p => {
        const opt = document.createElement('option');
        opt.value = p.name;
        opt.textContent = `${p.name}(${p.num})`;
        select.appendChild(opt);
      });
    }

    function renderPlayerTable() {
      const tbody = document.getElementById('playerTableBody');
      tbody.innerHTML = '';

      selectedPlayers
        .slice()
        .sort((a, b) => a.localeCompare(b, 'ko'))
        .forEach(name => {
          const tr = document.createElement('tr');
          tr.innerHTML = `
            <td>${nameWithNum(name)}</td>
            <td><button class='buttonStyles' onclick='removePlayer("${name}")'>ì‚­ì œ</button></td>
          `;
          tbody.appendChild(tr);
        });
    }

    function addPlayer() {
      const name = document.getElementById('playerSelect').value;
      if (!name) return;

      if (!selectedPlayers.includes(name)) {
        selectedPlayers.push(name);
      }

      refreshAll();
    }

    function removePlayer(name) {
      selectedPlayers = selectedPlayers.filter(n => n !== name);

      for (const key in positionAssignments) {
        if (positionAssignments[key] === name) {
          positionAssignments[key] = '';
        }
      }

      startingList = startingList.map(r =>
        r.name === name ? { name: '', num: '', pos: '' } : r
      );

      refreshAll();
    }

    /* ===============================
       í•„ë“œ í¬ì§€ì…˜ select
    =============================== */

    function renderPositionSelects() {
      const selects = document.querySelectorAll('.posSelect');

      selects.forEach(sel => {
        const pos = sel.id.replace('pos_', '');
        sel.innerHTML = '';

        const blank = document.createElement('option');
        blank.value = '';
        blank.textContent = ' ';
        sel.appendChild(blank);

        selectedPlayers.forEach(name => {
          const p = playerDB.find(x => x.name === name);
          const opt = document.createElement('option');
          opt.value = name;
          opt.textContent = `${name}(${p.num})`;

          const assignedPos = Object.keys(positionAssignments).find(k => positionAssignments[k] === name);

          if (assignedPos && assignedPos !== pos) {
            opt.style.background = '#d0d0d0';
            opt.style.color = '#555';
          }

          if (positionAssignments[pos] === name) opt.selected = true;

          sel.appendChild(opt);
        });
      });
    }

    function updatePosition(pos, name) {
      for (const key in positionAssignments) {
        if (key !== pos && positionAssignments[key] === name) {
          positionAssignments[key] = '';
        }
      }

      positionAssignments[pos] = name;

      refreshAll();
    }

    /* ===============================
       ì„ ë°œ í…Œì´ë¸”
    =============================== */

    function setupStartingTable() {
      const tbody = document.getElementById('startingTableBody');
      tbody.innerHTML = '';

      for (let i = 0; i < 10; i++) {
        const label = i === 9 ? 'íˆ¬ìˆ˜' : (i + 1);
        const tr = document.createElement('tr');

        if (i === 9) {
          tr.innerHTML = `
            <td>${label}</td>
            <td><span id='start_name_${i}'></span></td>
            <td id='start_pos_${i}'></td>
          `;
        } else {
          tr.innerHTML = `
            <td>${label}</td>
            <td><select id='start_sel_${i}' style='width:90px' onchange='selectStarting(${i}, this.value)'></select></td>
            <td id='start_pos_${i}'></td>
          `;
        }

        tbody.appendChild(tr);
      }
    }

    function renderStartingTable() {
      const assignedPlayers = Object.values(positionAssignments).filter(Boolean);

      for (let i = 0; i < 10; i++) {
        if (i === 9) {
          const pitcher = positionAssignments['P'];
          const span = document.getElementById('start_name_9');
          const tdPos = document.getElementById('start_pos_9');

          if (pitcher) {
            const p = playerDB.find(x => x.name === pitcher);
            startingList[9] = {
              name: pitcher,
              num: p.num,
              pos: convertPosition('P')
            };
            span.textContent = nameWithNum(pitcher);
            tdPos.textContent = convertPosition('P');
          } else {
            startingList[9] = { name: '', num: '', pos: '' };
            span.textContent = '';
            tdPos.textContent = '';
          }
          continue;
        }

        const sel = document.getElementById(`start_sel_${i}`);
        sel.innerHTML = '';

        // âœ… ë¹ˆ option ì¶”ê°€ + ëª…ì‹œì  ì„ íƒ
        const blank = document.createElement('option');
        blank.value = '';
        blank.textContent = ' ';
        blank.selected = true; // â† ë¸Œë¼ìš°ì € ìë™ ì„ íƒ ë°©ì§€
        sel.appendChild(blank);

        let selectedName = (startingList[i] && assignedPlayers.includes(startingList[i].name))
          ? startingList[i].name
          : '';
        let hasSelected = false;

        // âœ… ì„ ìˆ˜ option ìƒì„±
        assignedPlayers.forEach(name => {
          const p = playerDB.find(x => x.name === name);
          const opt = document.createElement('option');
          opt.value = name;
          opt.textContent = `${name}(${p.num})`;

          const alreadyUsed = startingList.slice(0, 9).some(r => r.name === name);
          const isSelected = selectedName === name;

          if (alreadyUsed && !isSelected) {
            opt.style.background = '#d0d0d0';
            opt.style.color = '#555';
          }

          if (isSelected) {
            opt.selected = true;
            hasSelected = true;
          }

          sel.appendChild(opt);
        });

        // âœ… ì•„ë¬´ ê²ƒë„ ì„ íƒë˜ì§€ ì•Šì•˜ë‹¤ë©´ ì²« ë²ˆì§¸(blank) ì„ íƒ
        if (!hasSelected) {
          sel.selectedIndex = 0;
        }

        const row = startingList[i];
        const name = row.name?.trim();

        // âœ… ì„ ìˆ˜ëª…ì´ ì—†ìœ¼ë©´: í¬ì§€ì…˜ì€ ë¬´ì¡°ê±´ ë¹„ìš´ë‹¤
        if (!name) {
          row.pos = "";
          document.getElementById(`start_pos_${i}`).textContent = "";
          continue; // â— ì—¬ê¸°ì„œ ë. ì•„ë˜ ë¡œì§ ì ˆëŒ€ íƒ€ë©´ ì•ˆ ë¨
        }

        // âœ… ì„ ìˆ˜ëª…ì´ ìˆì„ ë•Œë§Œ í¬ì§€ì…˜ ê³„ì‚°
        const assignedPosKey = Object.entries(positionAssignments)
          .find(([_, v]) => v === name)?.[0];

        row.pos = assignedPosKey ? convertPosition(assignedPosKey) : "";
        document.getElementById(`start_pos_${i}`).textContent = row.pos;
      }
    }

    function selectStarting(idx, name) {
      startingList.forEach((r, i) => {
        if (i !== idx && r.name === name) {
          startingList[i] = { name: '', num: '', pos: '' };
        }
      });

      if (!name) {
        startingList[idx] = { name: '', num: '', pos: '' };
      } else {
        const p = playerDB.find(x => x.name === name);
        const foundPos = Object.keys(positionAssignments).find(k => positionAssignments[k] === name);

        startingList[idx] = {
          name,
          num: p.num,
          pos: convertPosition(foundPos)
        };
      }

      refreshAll();
    }

    /* ===============================
       ëŒ€ê¸° ëª…ë‹¨
    =============================== */
    function renderWaitingTable() {
      const tbody = document.getElementById('waitingTableBody');
      const rows = Array.from(tbody.querySelectorAll('tr'));

      const used = startingList.map(r => r.name).filter(Boolean);
      const waitingList = selectedPlayers
        .filter(n => !used.includes(n)) // ì„ ë°œ ì œì™¸ â†’ ëŒ€ê¸° ëª…ë‹¨
        .sort((a, b) => a.localeCompare(b, 'ko'));

      const totalNeeded = Math.max(10, waitingList.length); // âœ… ìµœì†Œ 10í–‰ ìœ ì§€

      // âœ… í˜„ì¬ í–‰ ê°œìˆ˜ê°€ ë¶€ì¡±í•˜ë©´ ì¶”ê°€
      while (rows.length < totalNeeded) {
        const tr = document.createElement("tr");
        tr.innerHTML = "<td></td>";
        tbody.appendChild(tr);
        rows.push(tr);
      }

      // âœ… ì´ˆê³¼ í–‰ ì œê±° (10í–‰ + í•„ìš”í•œ ë§Œí¼ë§Œ ìœ ì§€)
      while (rows.length > totalNeeded) {
        const last = rows.pop();
        tbody.removeChild(last);
      }

      // âœ… ê° í–‰ ë‚´ìš© ì±„ìš°ê¸°
      for (let i = 0; i < rows.length; i++) {
        const row = rows[i];
        row.classList.remove("position-selected");
        const cell = row.querySelector("td");

        const name = waitingList[i];
        if (name) {
          const assignedPos = Object.keys(positionAssignments).find(k => positionAssignments[k] === name);
          const isStarter = startingList.some(r => r.name === name);

          if (assignedPos && !isStarter) {
            row.classList.add("position-selected");
          }

          cell.textContent = nameWithNum(name);
        } else {
          cell.textContent = "";
        }
      }
    }




    /* ===============================
       ëŠ¥ë ¥í‘œ (ìŒì˜ ì²˜ë¦¬ ë³µêµ¬)
    =============================== */

    function renderPositionAbility() {
      const container = document.getElementById('positionAbilityContainer');
      container.innerHTML = '';

      const table = document.createElement('table');
      table.classList.add("table_common");

      const players = [...selectedPlayers].sort((a, b) => a.localeCompare(b, 'ko'));

      abilityPositions.forEach(pos => {
        const starters = [];
        const backups = [];

        players.forEach(name => {
          const p = playerDB.find(x => x.name === name);
          const val = Number(p[pos.key]);
          if (val === 2) starters.push(name);
          else if (val === 1) backups.push(name);
        });

        /* ========== ì„ ë°œ í–‰ ========== */
        const trStarter = document.createElement('tr');
        const tdPos = document.createElement('td');
        tdPos.textContent = pos.label;
        tdPos.rowSpan = 2;
        tdPos.style.background = '#bae4ff';
        tdPos.style.fontWeight = 'bolder';

        trStarter.appendChild(tdPos);

        const tdStarterLabel = document.createElement('td');
        tdStarterLabel.textContent = 'ì„ ë°œ';
        tdStarterLabel.style.background = '#bae4ff';
        tdStarterLabel.style.fontWeight = 'bolder';
        trStarter.appendChild(tdStarterLabel);

        starters.forEach(name => {
          const td = document.createElement('td');
          td.textContent = nameWithNum(name);
          td.onclick = (e) => onAbilityClick(name, pos.key, e);

          const assigned = Object.keys(positionAssignments).find(k => positionAssignments[k] === name);
          if (assigned) {
            if (isSamePosition(pos.key, assigned))
              td.classList.add("position-selected");
            else
              td.classList.add("position-locked");
          }
          trStarter.appendChild(td);
        });

        /* ========== í›„ë³´ í–‰ ========== */
        const trBackup = document.createElement('tr');
        const tdBackupLabel = document.createElement('td');
        tdBackupLabel.textContent = 'í›„ë³´';
        tdBackupLabel.style.background = '#ffbbbb';
        tdBackupLabel.style.fontWeight = 'bolder';
        trBackup.appendChild(tdBackupLabel);

        backups.forEach(name => {
          const td = document.createElement('td');
          td.textContent = nameWithNum(name);
          td.onclick = (e) => onAbilityClick(name, pos.key, e);

          const assigned = Object.keys(positionAssignments).find(k => positionAssignments[k] === name);
          if (assigned) {
            if (isSamePosition(pos.key, assigned))
              td.classList.add("position-selected");
            else
              td.classList.add("position-locked");
          }
          trBackup.appendChild(td);
        });

        table.appendChild(trStarter);
        table.appendChild(trBackup);
      });

      container.appendChild(table);
    }

    function isSamePosition(posKey, assigned) {
      if (!assigned) return false;

      const a = assigned.toLowerCase();

      if (posKey === 'of') {
        return ['cf', 'lf', 'rf'].includes(a);
      }

      return posKey.toLowerCase() === a;
    }

    function convertPosition(code) {
      const map = {
        CF: 'ì¤‘ê²¬ìˆ˜(CF)',
        LF: 'ì¢Œìµìˆ˜(LF)',
        RF: 'ìš°ìµìˆ˜(RF)',
        SS: 'ìœ ê²©ìˆ˜(SS)',
        '2B': '2ë£¨ìˆ˜(2B)',
        '3B': '3ë£¨ìˆ˜(3B)',
        '1B': '1ë£¨ìˆ˜(1B)',
        P: 'íˆ¬ìˆ˜(P)',
        C: 'í¬ìˆ˜(C)',
        DH: 'ì§€ëª…íƒ€ì(DH)'
      };
      return map[code] || '';
    }

    /* ===============================
       ì™¸ì•¼ í¬ì§€ì…˜ íŒì—… ì²˜ë¦¬
    =============================== */

    let pendingOutfieldPlayer = null;

    function onAbilityClick(name, posKey, e) {
      if (posKey === 'of') {
        event.stopPropagation();
        pendingOutfieldPlayer = name;

        const popup = document.getElementById("outfieldPopup");

        // íŒì—… ìœ„ì¹˜ ì„¤ì •
        popup.style.left = `700px`;
        popup.style.top = `400px`;
        popup.style.display = "block";

        // âœ… í´ë¦­ ë°”ê¹¥ ë‹«ê¸° ì´ë²¤íŠ¸ë¥¼ ë‹¤ìŒ tickì—ì„œ ë“±ë¡
        setTimeout(() => {
          const onClickOutside = (e) => {
            if (!popup.contains(e.target)) {
              closeOutfieldPopup();
              document.removeEventListener("click", onClickOutside);
            }
          };
          document.addEventListener("click", onClickOutside);
        }, 0);

        return;
      }

      const posMap = {
        p: 'P', c: 'C',
        '1b': '1B', '2b': '2B', '3b': '3B',
        ss: 'SS'
      };

      const posCode = posMap[posKey];
      updatePosition(posCode, name);
      refreshAll();
    }

    function selectOutfieldPosition(posCode) {
      if (!pendingOutfieldPlayer) return;

      updatePosition(posCode, pendingOutfieldPlayer);

      pendingOutfieldPlayer = null;
      closeOutfieldPopup();
      refreshAll();
    }

    function closeOutfieldPopup() {
      document.getElementById("outfieldPopup").style.display = "none";
    }

    /* ===============================
       ì „ì²´ ë Œë”ë§
    =============================== */

    function refreshAll() {
      renderPlayerSelect();
      renderPlayerTable();
      renderPositionSelects();
      renderStartingTable();
      renderWaitingTable();
      renderPositionAbility();
    }

    /* ===============================
       ì €ì¥
    =============================== */

    async function saveOrder() {
      const name = document.getElementById('orderName').value.trim();
      if (!name) return alert("ì˜¤ë”ëª…ì„ ì…ë ¥í•˜ì„¸ìš”.");

      const pw = prompt("ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”");
      if (!pw) return;

      const valid = await fetch("https://checkpassword-2guymqucma-uc.a.run.app", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ password: pw })
      }).then(r => r.json());

      if (valid.status !== "ì„±ê³µ") {
        alert("ë¹„ë°€ë²ˆí˜¸ ì˜¤ë¥˜");
        return;
      }

      const exists = await fetch(
        "https://orderexists-2guymqucma-uc.a.run.app?name=" + encodeURIComponent(name)
      ).then(r => r.json());

      if (exists.exists) {
        if (!confirm("ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì˜¤ë”ì…ë‹ˆë‹¤. ë®ì–´ì“¸ê¹Œìš”?")) return;
      }

      const payload = {
        players: selectedPlayers.map(name => {
          const p = playerDB.find(x => x.name === name);
          return { name, num: p.num };
        }),

        positions: { ...positionAssignments },
        startingList: startingList.map(r => ({
          name: r.name,
          pos: r.pos
        })),

      };

      const res = await fetch("https://saveorder-2guymqucma-uc.a.run.app", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ orderName: name, payload })
      }).then(r => r.json());

      if (res.status === "ì„±ê³µ") {
        alert("ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!");
        location.href = "index.html";
      } else {
        alert("ì €ì¥ ì‹¤íŒ¨: " + res.error);
      }
    }

    /* ===============================
       ì´ˆê¸°í™”
    =============================== */

    window.onload = async () => {
      // âœ… ì´ˆê¸°í™”: ì‹œì‘í•  ë•Œ ë¬´ì¡°ê±´ ë¹ˆ ì„ ë°œëª…ë‹¨ìœ¼ë¡œ ì„¤ì •
      startingList = Array(10).fill().map(() => ({ name: "", num: "", pos: "" }));

      await loadPlayerDB();
      setupStartingTable();
      refreshAll();

      const orderName = new URLSearchParams(window.location.search).get("orderName");
      if (!orderName) return;

      document.getElementById('orderName').value = orderName;

      const data = await fetch(
        "https://getorder-2guymqucma-uc.a.run.app?name=" + encodeURIComponent(orderName)
      ).then(r => r.json());

      if (!data || !data.payload) {
        alert("ì˜¤ë” ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨");
        return;
      }

      selectedPlayers = data.payload.players.map(p => p.name);
      positionAssignments = { ...positionAssignments, ...data.payload.positions };
      startingList = [...data.payload.startingList];  // âœ… ì˜¤ë”ê°€ ìˆë‹¤ë©´ ë®ì–´ì”Œì›€

      refreshAll(); // ì‹¤ì œ ì˜¤ë” í‘œì‹œ

      document.addEventListener("click", (e) => {
        const popup = document.getElementById("outfieldPopup");

        // íŒì—…ì´ ë³´ì´ì§€ ì•Šìœ¼ë©´ ë¬´ì‹œ
        if (popup.style.display !== "block") return;

        // íŒì—… ì•ˆìª½ í´ë¦­ì´ë©´ ë¬´ì‹œ
        if (popup.contains(e.target)) return;

        // ë°”ê¹¥ í´ë¦­ â†’ íŒì—… ë‹«ê¸°
        closeOutfieldPopup();
      });
    };

    function closeOutfieldPopup() {
      const popup = document.getElementById("outfieldPopup");
      popup.style.display = "none";
    }





  </script>

  <!-- ì™¸ì•¼ ì„ íƒ íŒì—… -->
  <div id="outfieldPopup" style="
  display:none;
  position:absolute; /* â† absolute â†’ fixed */
  background:white;
  border:2px solid #333;
  padding:5px;
  border-radius:10px;
  z-index:1000;
  text-align:center;">
    <h3>ì™¸ì•¼ í¬ì§€ì…˜ ì„ íƒ</h3>
    <button class="buttonStyles" onclick="selectOutfieldPosition('LF')">ì¢Œìµìˆ˜(LF)</button>
    <button class="buttonStyles" onclick="selectOutfieldPosition('CF')">ì¤‘ê²¬ìˆ˜(CF)</button>
    <button class="buttonStyles" onclick="selectOutfieldPosition('RF')">ìš°ìµìˆ˜(RF)</button>
    <br><br>
    <button class="buttonStyles" onclick="closeOutfieldPopup()">ì·¨ì†Œ</button>
  </div>


</body>

</html>